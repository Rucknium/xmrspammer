<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Create high volume of spam Monero transactions • xmrspammer</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Create high volume of spam Monero transactions">
<meta name="description" content='Functions for managing Monero wallets to create many transactions in a short period of time. Useful for Monero "stressnet" testing.'>
<meta property="og:description" content='Functions for managing Monero wallets to create many transactions in a short period of time. Useful for Monero "stressnet" testing.'>
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">xmrspammer</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.3</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="xmrspammer">xmrspammer<a class="anchor" aria-label="anchor" href="#xmrspammer"></a>
</h1></div>
<!-- badges: start -->

<!-- badges: end -->
<p><code>xmrspammer</code> is an alpha project. Expect breaking changes in future versions.</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>Install R. Linux users should install the <code>r-base</code> and <code>r-base-dev</code> system packages.</p>
<p>You can install the development version of <code>xmrspammer</code> from <a href="https://github.com/Rucknium/xmrspammer" class="external-link">GitHub</a> if you have <code>git</code> and <code>curl</code> installed on your system with:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"remotes"</span><span class="op">)</span></span>
<span><span class="fu">remotes</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"Rucknium/xmrspammer"</span>, upgrade <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="id_-warning-wallets-not-secure">❗❗❗ WARNING: Wallets not secure<a class="anchor" aria-label="anchor" href="#id_-warning-wallets-not-secure"></a>
</h2>
<p><code>xmrspammer</code> is intended to be used with valueless testnet coins. The security of the wallet creation and management processes have not been evaluated. If you use <code>xmrspammer</code> on mainnet, your coins could be stolen.</p>
</div>
<div class="section level2">
<h2 id="design">Design<a class="anchor" aria-label="anchor" href="#design"></a>
</h2>
<p>The Monero protocol has a few restrictions that make transaction spamming more difficult than, say, bitcoin.</p>
<p>First is the 16-output limit. The maximum number of outputs that a Monero transaction can have is 16. A single output cannot be as easily split into a very large number of outputs due to this restriction.</p>
<p>Second is the 10-block lock. Wallets must wait 10 confirmations to spend new outputs.</p>
<p>A third factor in stressnet testing is the need to fill the stressnet txpool to test node performance when the txpool is large. Transactions cannot be chained together in the txpool (i.e. child transactions cannot spend unconfirmed parent outputs). A wallet needs to have many outputs available to spend so that many of its unconfirmed transactions can wait in the txpool.</p>
<p>The design of <code>xmrspammer</code> works around these limitations. Wallets are set up to expand a single output into a “tree”. At the end of the process, a wallet will have many “leaves” that contain a single output within an account. From there, the default spamming procedure iterates through each leaf, creating a self-spend transaction back to each leaf.</p>
<p><code>xmrspammer</code> creates a user-specified number of wallets and boots a <code>monero-wallet-rpc</code> process for each wallet. A <code>monerod</code> Monero node process must be available on the local machine (TODO: allow remote nodes). For each wallet, <code>xmrspammer</code> spawns an R process that runs a spamming loop. The loop instructs each <code>monero-wallet-rpc</code> process to create and broadcast transactions as quickly as possible.</p>
</div>
<div class="section level2">
<h2 id="usage">Usage<a class="anchor" aria-label="anchor" href="#usage"></a>
</h2>
<p><code>xmrspammer</code> has only been tested on Linux.</p>
<p>Users should view coins put into the spamming wallets as unrecoverable. Large amounts of coins should not be put into single spamming wallets because wallets with hundreds of thousands of transactions become slow to produce new transactions. At that point, the wallets should be abandoned and fresh wallets created. TODO: Suggestions for spamming wallet deposit amounts.</p>
<div class="section level3">
<h3 id="prerequisites">Prerequisites<a class="anchor" aria-label="anchor" href="#prerequisites"></a>
</h3>
<ol style="list-style-type: decimal">
<li><p>You must have a Monero node running locally. It is best to enable the restricted RPC port because connections to the unrestricted RPC port experience performance problems when the txpool is large. You can start your Monero node with the standard testnet restricted RPC port by adding <code>--rpc-restricted-bind-port=28089</code> the flag in your <code>monerod</code> startup command. If you prefer not to enable the restricted RPC port, the <em>unrestricted</em> RPC port for testnet at 28081 is available by default to connections from within your local machine.</p></li>
<li><p>You should have a wallet with some testnet XMR. You will send coins from this wallet to the spamming wallets.</p></li>
<li><p>You must create a new empty working directory. Place the correct version of <code>monero-wallet-rpc</code> into the working directory.</p></li>
</ol>
<p>Starting with a small-scale test wallet can help familiarize users with the process and discover bugs early.</p>
</div>
<div class="section level3">
<h3 id="small-scale-test">Small-scale test<a class="anchor" aria-label="anchor" href="#small-scale-test"></a>
</h3>
<p>Start a new R instance in a terminal in the working directory. Use <code>screen</code> or another similar program to prevent losing the instance. Once you have installed <code>xmrspammer</code>, load the package into the workspace:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://rucknium.github.io/xmrspammer/">xmrspammer</a></span><span class="op">)</span></span></code></pre></div>
<p>You must specify the <code>monerod</code> RPC port and the number of spamming wallets to be created. In this example we will assume that you have the node’s restricted RPC port available at 28089. We will create one wallet for this test.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">wallets</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/gen.wallets.html">gen.wallets</a></span><span class="op">(</span>monerod.rpc.port <span class="op">=</span> <span class="fl">28089</span>, n.wallets <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span></code></pre></div>
<p>A single <code>monero-wallet-rpc</code> process should have launched to manage the single wallet we created. Check that the process is alive:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">wallets</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">$</span><span class="va">monero_wallet_rpc_process</span><span class="op">$</span><span class="fu">is_alive</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>The console should print <code>TRUE</code>.</p>
<p>Next, we will fund the spamming wallet. <code><a href="reference/fund.wallets.html">fund.wallets()</a></code> is a convenience function that will print the exact command to input into the <code>monero-wallet-cli</code> of the funding wallet. Input the <code>amount</code> argument to specify the total amount of XMR you will send to the spamming wallet(s).</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/fund.wallets.html">fund.wallets</a></span><span class="op">(</span><span class="va">wallets</span>, amount <span class="op">=</span> <span class="fl">30</span><span class="op">)</span></span></code></pre></div>
<p>R will print a statement like</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode txt"><code class="sourceCode default"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a>transfer priority &lt;address&gt; 30 subtractfeefrom=all</span></code></pre></div>
<p>Input the statement into <code>monero-wallet-cli</code> and confirm broadcast of the transaction. You will have to wait 10 blocks or about 20 minutes for the outputs of the transaction to be spendable for the next step.</p>
<p>Now we will create the account leaves of the wallet. This test wallet will use three levels of 15-output transactions. The process will create <code>15^3  = 3375</code> leaf accounts. Fee priority will be set to 4 for each level. There are four standard fee tiers: 1, 2, 3, and 4. When the txpool is full, a low-fee transaction could take a long time to confirm, slowing down this step in the process. We will choose fee priority 4 for all tree levels so that the accounts are built as quickly as possible.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">wallets</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/prep.leaves.wallets.html">prep.leaves.wallets</a></span><span class="op">(</span><span class="va">wallets</span>, n.outputs <span class="op">=</span> <span class="fl">15</span>,</span>
<span>  n.tree.levels <span class="op">=</span> <span class="fl">3</span>, fee.priority <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">4</span>, <span class="fl">4</span>, <span class="fl">4</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>These transactions should take about 60 minutes (30 blocks) to become spendable.</p>
<p>Finally, start the spamming. The next line will initiate an infinite loop. Input <code>ctrl + c</code> to interrupt the spamming loop if desired.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/spam.1in.2out.wallets.html">spam.1in.2out.wallets</a></span><span class="op">(</span><span class="va">wallets</span><span class="op">)</span></span></code></pre></div>
<p>You can check the status of the spamming wallets by starting a new R session in a different terminal window (or a different <code>screen</code> session). You must start the R session in the working directory where you started the original R session. It should have some files and subdirectories by now. Remember to load the package into the workspace:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://rucknium.github.io/xmrspammer/">xmrspammer</a></span><span class="op">)</span></span></code></pre></div>
<p>Now load the wallet data into the workspace:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">wallets</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/readRDS.html" class="external-link">readRDS</a></span><span class="op">(</span><span class="st">"spam_wallets_data.rds"</span><span class="op">)</span></span></code></pre></div>
<p>Get some status information about the wallet:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/wallets.status.html">wallets.status</a></span><span class="op">(</span><span class="va">wallets</span>, get_balance <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p>Ignore the message about the RPC process being dead. You may see log messages about insufficient funds for creating new transactions. When the txpool is large, there will be many transactions in the queue in front of yours, so you may have all of your accounts with transactions waiting in the txpool.</p>
</div>
<div class="section level3">
<h3 id="large-scale-use">Large-scale use<a class="anchor" aria-label="anchor" href="#large-scale-use"></a>
</h3>
<p>TODO</p>
</div>
<div class="section level3">
<h3 id="revive-wallets">Revive wallets<a class="anchor" aria-label="anchor" href="#revive-wallets"></a>
</h3>
<p>TODO</p>
</div>
</div>
</div>
  </main><aside class="col-md-3"><div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small>GPL (&gt;= 3)</small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing xmrspammer</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li> Rucknium <br><small class="roles"> Maintainer, author, copyright holder </small> <a href="https://orcid.org/0000-0001-5999-8950" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a>  </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://lifecycle.r-lib.org/articles/stages.html" class="external-link"><img src="https://img.shields.io/badge/lifecycle-experimental-orange.svg" alt="Lifecycle: experimental"></a></li>
<li><a href="https://github.com/Rucknium/xmrspammer/actions/workflows/R-CMD-check.yaml" class="external-link"><img src="https://github.com/Rucknium/xmrspammer/actions/workflows/R-CMD-check.yaml/badge.svg" alt="R-CMD-check"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Rucknium.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
